# B2B ç½‘ç«™æ°¸ä¹…å…è´¹éƒ¨ç½²æ•™ç¨‹ï¼ˆæ›´æ–°ç‰ˆï¼‰

## ğŸ“‹ éƒ¨ç½²æ–¹æ¡ˆ

**å‰ç«¯**ï¼šCloudflare Pagesï¼ˆæ°¸ä¹…å…è´¹ï¼‰  
**åç«¯**ï¼šRenderï¼ˆå…è´¹ 750 å°æ—¶/æœˆï¼Œè‡ªåŠ¨ä¼‘çœ ï¼‰  
**æ•°æ®åº“**ï¼šNeon æˆ– Supabaseï¼ˆæ°¸ä¹…å…è´¹ PostgreSQLï¼‰

> **ä¸ºä»€ä¹ˆæ”¹ç”¨ PostgreSQLï¼Ÿ**
> - Neon å’Œ Supabase æä¾›æ°¸ä¹…å…è´¹å¥—é¤
> - Django åŸç”Ÿæ”¯æŒ PostgreSQL
> - PostgreSQL å’Œ MySQL åŸºæœ¬å…¼å®¹ï¼Œæ”¹åŠ¨å¾ˆå°

---

## å‡†å¤‡å·¥ä½œ

### éœ€è¦æ³¨å†Œçš„è´¦å·ï¼ˆå…¨éƒ¨å…è´¹ï¼‰

| å¹³å° | è´¦å· | è¯´æ˜ |
|------|------|------|
| GitHub | [github.com](https://github.com) | ä»£ç æ‰˜ç®¡ |
| Cloudflare | [pages.cloudflare.com](https://pages.cloudflare.com) | å‰ç«¯éƒ¨ç½² |
| Render | [render.com](https://render.com) | åç«¯éƒ¨ç½² |
| Neonï¼ˆæˆ–Supabaseï¼‰ | [neon.tech](https://neon.tech) | æ•°æ®åº“ï¼ˆäºŒé€‰ä¸€ï¼‰ |

---

## ç¬¬ä¸€æ­¥ï¼šä¸Šä¼ ä»£ç åˆ° GitHub

### 1.1 åˆ›å»º GitHub ä»“åº“

1. ç™»å½• [GitHub.com](https://github.com)
2. ç‚¹å‡»å³ä¸Šè§’ `+` â†’ `New repository`
3. ä»“åº“åç§°ï¼š`web-b2b`
4. é€‰æ‹© `Public` æˆ– `Private`
5. ç‚¹å‡» `Create repository`

### 1.2 ä¸Šä¼ ä»£ç 

**å¦‚æœä½ ä¼šç”¨ Git å‘½ä»¤ï¼š**

```bash
cd d:/Trae/web
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/web-b2b.git
git push -u origin master
```

**å¦‚æœä¸ä¼šç”¨ Gitï¼š**
åœ¨ GitHub é¡µé¢æ‹–æ‹½ä¸Šä¼  `web` å’Œ `server` æ–‡ä»¶å¤¹

---

## ç¬¬äºŒæ­¥ï¼šåˆ›å»º Neon æ•°æ®åº“ï¼ˆæ¨èï¼‰

### 2.1 æ³¨å†Œ Neon

1. è®¿é—® [Neon.tech](https://neon.tech)
2. ç‚¹å‡» `Sign up`ï¼Œé€‰æ‹© GitHub è´¦å·æ³¨å†Œ
3. åˆ›å»ºæ–°é¡¹ç›®

### 2.2 åˆ›å»ºæ•°æ®åº“

1. ç‚¹å‡» `Create project`
2. é¡¹ç›®åç§°ï¼š`web-b2b`
3. æ•°æ®åº“åç§°ï¼š`neondb`ï¼ˆé»˜è®¤ï¼‰
4. åŒºåŸŸï¼šé€‰æ‹©ç¦»ä½ æœ€è¿‘çš„
5. ç‚¹å‡» `Create project`

### 2.3 å¯¼å…¥æ•°æ®åˆ° Neon

Neon ä½¿ç”¨ PostgreSQLï¼Œæˆ‘ä»¬éœ€è¦è½¬æ¢ä½ çš„ MySQL æ•°æ®ã€‚

#### æ–¹æ³• 1ï¼šä½¿ç”¨ pgloader è½¬æ¢ï¼ˆæ¨èï¼‰

1. æœ¬åœ°å®‰è£… pgloaderï¼š
```bash
# Windows: ä¸‹è½½å¹¶å®‰è£… https://pgloader.io/
# æˆ–ä½¿ç”¨ WSL: sudo apt-get install pgloader
```

2. è½¬æ¢æ•°æ®åº“ï¼š
```bash
pgloader mysql://root:4643830@127.0.0.1:3306/web_b2b postgresql://ç”¨æˆ·:å¯†ç @ä½ çš„Neonä¸»æœº/neondb
```

#### æ–¹æ³• 2ï¼šæ‰‹åŠ¨è½¬æ¢ï¼ˆå¦‚æœæ²¡æœ‰å·¥å…·ï¼‰

1. æ‰“å¼€ `web_b2b.sql` æ–‡æœ¬ç¼–è¾‘å™¨
2. æ‰¹é‡æ›¿æ¢ä»¥ä¸‹å†…å®¹ï¼š
   - `int(11)` â†’ `integer`
   - `bigint(20)` â†’ `bigint`
   - `varchar(255)` â†’ `varchar(255)`
   - `text` â†’ `text`
   - `datetime(6)` â†’ `timestamp`
   - `ENGINE = InnoDB ...` â†’ åˆ é™¤æ•´è¡Œ
   - `AUTO_INCREMENT = 1` â†’ åˆ é™¤
   - `DEFAULT NULL` â†’ ä¿ç•™
   - `NOT NULL` â†’ ä¿ç•™

3. åœ¨ Neon æ§åˆ¶å°ï¼Œç‚¹å‡» `SQL Editor`
4. ç²˜è´´ä¿®æ”¹åçš„ SQL å¹¶æ‰§è¡Œ

### 2.4 è·å–æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²

1. åœ¨ Neon æ§åˆ¶å°ï¼Œç‚¹å‡»é¡¹ç›®çš„ `Connection Details`
2. å¤åˆ¶ `Connection string`ï¼Œæ ¼å¼ç±»ä¼¼ï¼š
```
postgresql://web_b2b_owner:xxxxx@ep-xxxxx.us-east-2.aws.neon.tech/neondb?sslmode=require
```
3. **ä¿å­˜è¿™ä¸ªå­—ç¬¦ä¸²ï¼**

---

## ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½² Django åç«¯åˆ° Render

### 3.1 æ³¨å†Œ Render

1. è®¿é—® [Render.com](https://render.com)
2. ç‚¹å‡» `Sign up`ï¼Œé€‰æ‹© GitHub è´¦å·æ³¨å†Œ
3. æˆæƒè®¿é—® GitHub ä»“åº“

### 3.2 éƒ¨ç½² Django

1. ç‚¹å‡» `New +` â†’ `Web Service`
2. é€‰æ‹©ä½ çš„ `web-b2b` ä»“åº“
3. é…ç½®å¦‚ä¸‹ï¼š

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| **Name** | `django-backend` |
| **Region** | `Oregon (US West)` |
| **Branch** | `master` |
| **Runtime** | `Python 3` |
| **Build Command** | `pip install -r requirements.txt && python manage.py migrate` |
| **Start Command** | `gunicorn server.wsgi:application --bind 0.0.0.0:$PORT` |

4. **æ·»åŠ ç¯å¢ƒå˜é‡**ï¼ˆç‚¹å‡» `Advanced` â†’ `Environment Variables`ï¼‰ï¼š

| å˜é‡å | å€¼ |
|--------|-----|
| `PYTHON_VERSION` | `3.8` |
| `DJANGO_SETTINGS_MODULE` | `server.settings` |
| `DATABASE_URL` | `ä½ çš„ Neon Connection string` |

5. ç‚¹å‡» `Create Web Service`
6. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆ5-10 åˆ†é’Ÿï¼‰

### 3.3 è·å–åç«¯ URL

éƒ¨ç½²å®Œæˆåï¼Œä½ ä¼šå¾—åˆ°ï¼š
```
https://django-backend-xxxx.onrender.com
```
**ä¿å­˜è¿™ä¸ª URLï¼**

---

## ç¬¬å››æ­¥ï¼šéƒ¨ç½² Next.js å‰ç«¯åˆ° Cloudflare Pages

### 4.1 æ³¨å†Œ Cloudflare

1. è®¿é—® [Cloudflare.com](https://cloudflare.com)
2. ç‚¹å‡» `Sign up`ï¼Œæ³¨å†Œè´¦å·
3. éªŒè¯é‚®ç®±

### 4.2 éƒ¨ç½²åˆ° Pages

1. ç™»å½•åï¼Œé€‰æ‹© `Workers & Pages` â†’ `Pages`
2. ç‚¹å‡» `Create application` â†’ `Pages` â†’ `Connect to Git`
3. é€‰æ‹©ä½ çš„ `web-b2b` ä»“åº“
4. é…ç½®æ„å»ºï¼š

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| **Project name** | `web-b2b` |
| **Production branch** | `master` |
| **Framework preset** | `Next.js` |
| **Build command** | `npm run build` |
| **Build output directory** | `out` |

5. **æ·»åŠ ç¯å¢ƒå˜é‡**ï¼š

| å˜é‡å | å€¼ |
|--------|-----|
| `NEXT_PUBLIC_API_URL` | `https://django-backend-xxxx.onrender.com` |

6. ç‚¹å‡» `Save and Deploy`
7. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆ2-5 åˆ†é’Ÿï¼‰

---

## ç¬¬äº”æ­¥ï¼šæµ‹è¯•éªŒè¯

### 5.1 æµ‹è¯•åç«¯

è®¿é—®ï¼š`https://django-backend-xxxx.onrender.com/admin/`  
ç™»å½•ï¼š`admin123` / `admin123`

### 5.2 æµ‹è¯•å‰ç«¯

è®¿é—®ï¼š`https://web-b2b.pages.dev`

---

## ğŸ”§ éœ€è¦ä¿®æ”¹çš„ä»£ç 

ç”±äºä» MySQL æ”¹ä¸º PostgreSQLï¼Œéœ€è¦ä¿®æ”¹ Django é…ç½®ï¼š

### ä¿®æ”¹ server/requirements.txt

ç¡®ä¿åŒ…å«ï¼š
```
psycopg2-binary==2.9.9
```

### ä¿®æ”¹ server/server/settings.py

```python
# Database é…ç½®æ”¹ä¸º PostgreSQL
import dj_database_url

if os.environ.get('RENDER') != 'true':
    # å¼€å‘ç¯å¢ƒ - ä¿ç•™ MySQL
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.mysql',
            'NAME': 'web_b2b',
            'USER': 'root',
            'PASSWORD': '4643830',
            'HOST': '127.0.0.1',
            'PORT': '3306',
            'OPTIONS': {
                'charset': 'utf8mb4',
                'init_command': "SET NAMES 'utf8mb4'",
            }
        }
    }
else:
    # ç”Ÿäº§ç¯å¢ƒ - ä½¿ç”¨ PostgreSQL (Neon)
    DATABASES = {
        'default': dj_database_url.config(
            default=os.environ.get('DATABASE_URL'),
            conn_max_age=600,
            conn_health_checks=True,
        )
    }
```

---

## ğŸ’¡ ä½¿ç”¨ Supabase æ›¿ä»£ Neon

å¦‚æœä½ æ›´å–œæ¬¢ä½¿ç”¨ Supabaseï¼š

### Supabase å…è´¹å¥—é¤
- 500MB æ•°æ®åº“å­˜å‚¨
- 500MB æ–‡ä»¶å­˜å‚¨
- 2GB å¸¦å®½/æœˆ
- 2 ä¸ªé¡¹ç›®

### ä½¿ç”¨ Supabase çš„æ­¥éª¤

1. æ³¨å†Œ [Supabase.com](https://supabase.com)
2. åˆ›å»ºæ–°é¡¹ç›®ï¼š`web-b2b`
3. åœ¨ SQL Editor ä¸­å¯¼å…¥è½¬æ¢åçš„ SQL
4. è·å– Connection stringï¼š
```
postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres
```

**æ­¥éª¤ä¸ Neon å®Œå…¨ç›¸åŒï¼Œåªæ˜¯è·å–è¿æ¥å­—ç¬¦ä¸²çš„æ–¹å¼ä¸åŒï¼**

---

## ğŸ†š æ•°æ®åº“æ–¹æ¡ˆå¯¹æ¯”

| æ•°æ®åº“ | å…è´¹é¢åº¦ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|--------|---------|------|------|
| **Neon** | 0.5GB å­˜å‚¨ + è‡ªåŠ¨ä¼‘çœ  | ç®€å•æ˜“ç”¨ï¼Œè‡ªåŠ¨æ‰©å±• | ä¼‘çœ åé¦–æ¬¡è¿æ¥æ…¢ |
| **Supabase** | 500MB å­˜å‚¨ | åŠŸèƒ½ä¸°å¯Œï¼Œç•Œé¢å‹å¥½ | å­˜å‚¨è¾ƒå° |
| **Aiven** | 3GB å­˜å‚¨ï¼ˆè¯•ç”¨æœŸï¼‰ | å­˜å‚¨å¤§ | éœ€è¦ä¿¡ç”¨å¡ |
| **Railway** | 1GB å­˜å‚¨ï¼ˆè¯•ç”¨ï¼‰ | éƒ¨ç½²æ–¹ä¾¿ | éœ€è¦ç»‘å®šå¡ |

**æ¨èï¼šNeonï¼ˆæœ€ç®€å•ï¼‰æˆ– Supabaseï¼ˆåŠŸèƒ½å¤šï¼‰**

---

## â“ å¸¸è§é—®é¢˜

### Q: ä» MySQL è½¬æ¢åˆ° PostgreSQL ä¼šå¾ˆå¤æ‚å—ï¼Ÿ
A: åŸºæœ¬æ•°æ®ç±»å‹å…¼å®¹ï¼Œä¸»è¦é—®é¢˜æ˜¯ï¼š
- `int(11)` â†’ `integer`
- `datetime` â†’ `timestamp`
- åˆ é™¤ MySQL ç‰¹æœ‰çš„ ENGINEã€AUTO_INCREMENT ç­‰

### Q: Render å…è´¹ç‰ˆçœŸçš„æ°¸ä¹…å…è´¹å—ï¼Ÿ
A: æ˜¯çš„ï¼Œæ¯æœˆ 750 å°æ—¶å…è´¹ï¼Œè¶³å¤Ÿ 24 å°æ—¶è¿è¡Œã€‚åªæ˜¯ 15 åˆ†é’Ÿæ— è®¿é—®ä¼šä¼‘çœ ã€‚

### Q: Cloudflare Pages æœ‰æµé‡é™åˆ¶å—ï¼Ÿ
A: å…è´¹ç‰ˆæ— é™æµé‡ï¼Œéå¸¸æ…·æ…¨ï¼

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥å„å¹³å°çš„éƒ¨ç½²æ—¥å¿—
2. ç¡®è®¤ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸ‰
