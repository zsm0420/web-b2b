# B2B ç½‘ç«™æ°¸ä¹…å…è´¹éƒ¨ç½²æ•™ç¨‹

## ğŸ“‹ éƒ¨ç½²æ–¹æ¡ˆ

**å‰ç«¯**ï¼šCloudflare Pagesï¼ˆæ°¸ä¹…å…è´¹ï¼‰  
**åç«¯**ï¼šRenderï¼ˆå…è´¹ 750 å°æ—¶/æœˆï¼Œè‡ªåŠ¨ä¼‘çœ ï¼‰  
**æ•°æ®åº“**ï¼šPlanetScaleï¼ˆæ°¸ä¹…å…è´¹ï¼‰

---

## ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡ä»£ç å¹¶ä¸Šä¼ åˆ° GitHub

### 1.1 åˆ›å»º GitHub ä»“åº“

1. ç™»å½• [GitHub.com](https://github.com)
2. ç‚¹å‡»å³ä¸Šè§’ `+` â†’ `New repository`
3. ä»“åº“åç§°ï¼š`web-b2b`ï¼ˆæˆ–å…¶ä»–ä½ å–œæ¬¢çš„åå­—ï¼‰
4. é€‰æ‹© `Public` æˆ– `Private` éƒ½å¯ä»¥
5. ç‚¹å‡» `Create repository`

### 1.2 ä¸Šä¼ ä»£ç åˆ° GitHub

**å¦‚æœä½ ä¼šç”¨ Git å‘½ä»¤ï¼š**

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd d:/Trae/web

# åˆå§‹åŒ– Gitï¼ˆå¦‚æœè¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼‰
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤
git commit -m "Initial commit"

# å…³è”è¿œç¨‹ä»“åº“
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/web-b2b.git

# æ¨é€åˆ° GitHub
git push -u origin master
```

**å¦‚æœä¸ä¼šç”¨ Git å‘½ä»¤ï¼š**
1. åœ¨ GitHub ä»“åº“é¡µé¢ï¼Œç‚¹å‡» `uploading an existing file`
2. æ‹–æ‹½æ•´ä¸ª `web` å’Œ `server` æ–‡ä»¶å¤¹
3. ç‚¹å‡» `Commit changes`

---

## ç¬¬äºŒæ­¥ï¼šåˆ›å»º PlanetScale æ•°æ®åº“

### 2.1 æ³¨å†Œ PlanetScale

1. è®¿é—® [PlanetScale.com](https://planetscale.com)
2. ç‚¹å‡» `Sign up`ï¼Œé€‰æ‹© GitHub è´¦å·æ³¨å†Œï¼ˆæœ€ç®€å•ï¼‰
3. åˆ›å»ºæ–°ç»„ç»‡ï¼Œåç§°éšæ„ï¼ˆä¾‹å¦‚ `my-b2b-site`ï¼‰

### 2.2 åˆ›å»ºæ•°æ®åº“

1. ç‚¹å‡» `New database`
2. æ•°æ®åº“åç§°ï¼š`web_b2b`
3. åŒºåŸŸï¼šé€‰æ‹© `AWS us-east-1`ï¼ˆæˆ–è€…ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸï¼‰
4. ç‚¹å‡» `Create database`

### 2.3 å¯¼å…¥æ•°æ®

**é‡è¦ï¼šPlanetScale éœ€è¦ SQL è„šæœ¬ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä½ çš„ SQL æ–‡ä»¶**

1. æ‰“å¼€ä½ çš„ `web_b2b.sql` æ–‡ä»¶
2. æ‰¹é‡æ›¿æ¢ä»¥ä¸‹å†…å®¹ï¼š
   - æŠŠ `ENGINE=InnoDB` åˆ é™¤æˆ–ç•™ç©º
   - æŠŠ `ROW_FORMAT=DYNAMIC` åˆ é™¤
   - æŠŠ `AUTO_INCREMENT=1` æ”¹ä¸º `PRIMARY KEY AUTOINCREMENT`
   - æŠŠ `datetime(6)` æ”¹ä¸º `datetime`

**æˆ–è€…ç›´æ¥ç”¨è¿™ä¸ªç®€åŒ–ç‰ˆï¼š**

```bash
# åœ¨ MySQL æœ¬åœ°å¯¼å‡ºä¸ºå…¼å®¹æ ¼å¼
mysqldump -u root -p web_b2b --no-data > schema.sql

# ç„¶ååœ¨ PlanetScale å¯¼å…¥
```

**å¦‚æœä¸Šé¢çš„æ–¹æ³•å¤ªå¤æ‚ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š**

1. ç‚¹å‡»æ•°æ®åº“ä¸­çš„ `Import` æ ‡ç­¾
2. ä¸Šä¼ ä½ çš„ `web_b2b.sql` æ–‡ä»¶
3. PlanetScale ä¼šè‡ªåŠ¨å°è¯•è½¬æ¢

### 2.4 è·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯

1. åœ¨æ•°æ®åº“é¡µé¢ï¼Œç‚¹å‡» `Connect` æŒ‰é’®
2. é€‰æ‹© `Django` é€‰é¡¹
3. å¤åˆ¶ `DATABASE_URL`ï¼ˆæ ¼å¼ç±»ä¼¼ï¼š`mysql://xxx:xxx@xxx.us-east-1.psdb.cloud/web_b2b?sslaccept=strict`ï¼‰
4. **ä¿å­˜è¿™ä¸ªé“¾æ¥ï¼Œåé¢ä¼šç”¨åˆ°**

---

## ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½² Django åç«¯åˆ° Render

### 3.1 æ³¨å†Œ Render

1. è®¿é—® [Render.com](https://render.com)
2. ç‚¹å‡» `Sign up`ï¼Œé€‰æ‹© GitHub è´¦å·æ³¨å†Œ
3. æˆäºˆ Render è®¿é—®ä½ çš„ GitHub ä»“åº“çš„æƒé™

### 3.2 éƒ¨ç½² Django åº”ç”¨

1. ç™»å½• Render åï¼Œç‚¹å‡» `New +` â†’ `Web Service`
2. é€‰æ‹©ä½ çš„ `web-b2b` ä»“åº“
3. é…ç½®å¦‚ä¸‹ï¼š

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| **Name** | `django-backend` |
| **Region** | `Oregon (US West)` |
| **Branch** | `master` |
| **Runtime** | `Python 3` |
| **Build Command** | `pip install -r requirements.txt` |
| **Start Command** | `gunicorn server.wsgi:application --bind 0.0.0.0:$PORT` |

4. **é«˜çº§é…ç½®ï¼š**

ç‚¹å‡» `Advanced` â†’ `Environment Variables`ï¼Œæ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | å€¼ |
|--------|-----|
| `PYTHON_VERSION` | `3.8` |
| `DJANGO_SETTINGS_MODULE` | `server.settings` |
| `DATABASE_URL` | `ä½ çš„ PlanetScale DATABASE_URL`ï¼ˆä»ç¬¬äºŒæ­¥è·å–ï¼‰ |

5. **é…ç½®æ•°æ®åº“ï¼š**

åœ¨ Render ä¸Šæ·»åŠ  PlanetScale æ•°æ®åº“ï¼š
- è¿”å› Render é¦–é¡µ
- ç‚¹å‡» `New +` â†’ `Database` â†’ `PlanetScale`
- è¿æ¥åˆ°ä½ åœ¨ PlanetScale åˆ›å»ºçš„æ•°æ®åº“
- æˆ–è€…ç›´æ¥åœ¨ Django æœåŠ¡çš„ Environment Variables ä¸­æ·»åŠ  `DATABASE_URL`

6. ç‚¹å‡» `Create Web Service`
7. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆå¤§çº¦ 5-10 åˆ†é’Ÿï¼‰

### 3.3 è·å–åç«¯ URL

éƒ¨ç½²å®Œæˆåï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„ URLï¼š
```
https://django-backend-xxxx.onrender.com
```

**ä¿å­˜è¿™ä¸ª URLï¼Œä¸‹ä¸€æ­¥ä¼šç”¨åˆ°**

---

## ç¬¬å››æ­¥ï¼šéƒ¨ç½² Next.js å‰ç«¯åˆ° Cloudflare Pages

### 4.1 æ³¨å†Œ Cloudflare

1. è®¿é—® [Cloudflare.com](https://cloudflare.com)
2. ç‚¹å‡» `Sign up`ï¼Œæ³¨å†Œè´¦å·
3. éªŒè¯é‚®ç®±

### 4.2 éƒ¨ç½²åˆ° Cloudflare Pages

1. ç™»å½•åï¼Œåœ¨å·¦ä¾§èœå•é€‰æ‹© `Workers & Pages` â†’ `Pages`
2. ç‚¹å‡» `Create application` â†’ `Pages` â†’ `Connect to Git`
3. æˆæƒ Cloudflare è®¿é—®ä½ çš„ GitHub
4. é€‰æ‹©ä½ çš„ `web-b2b` ä»“åº“
5. é…ç½®æ„å»ºè®¾ç½®ï¼š

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| **Project name** | `web-b2b` |
| **Production branch** | `master` |
| **Framework preset** | `Next.js` |
| **Build command** | `npm run build` |
| **Build output directory** | `out` |

**é‡è¦ï¼šä¿®æ”¹ä¸º `out` ç›®å½•ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ next.config.mjs ä¸­é…ç½®äº† `output: 'export'`**

6. **é…ç½®ç¯å¢ƒå˜é‡ï¼š**

åœ¨ `Environment variables` éƒ¨åˆ†æ·»åŠ ï¼š

| å˜é‡å | å€¼ |
|--------|-----|
| `NEXT_PUBLIC_API_URL` | `ä½ çš„ Render åç«¯ URL`ï¼ˆä¾‹å¦‚ï¼š`https://django-backend-xxxx.onrender.com`ï¼‰ |

7. ç‚¹å‡» `Save and Deploy`
8. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆå¤§çº¦ 2-5 åˆ†é’Ÿï¼‰

### 4.3 é…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåï¼š

1. åœ¨ Cloudflare Pages é¡¹ç›®ä¸­ï¼Œç‚¹å‡» `Custom domains`
2. ç‚¹å‡» `Set up a custom domain`
3. è¾“å…¥ä½ çš„åŸŸåï¼ˆä¾‹å¦‚ `www.yourdomain.com`ï¼‰
4. æŒ‰ç…§æç¤ºé…ç½® DNS

---

## ç¬¬äº”æ­¥ï¼šæµ‹è¯•å’ŒéªŒè¯

### 5.1 æµ‹è¯•åç«¯ API

è®¿é—®ä½ çš„ Render åç«¯ URL + `/api/`ï¼ˆä¾‹å¦‚ï¼‰ï¼š
```
https://django-backend-xxxx.onrender.com/api/
```

å¦‚æœèƒ½çœ‹åˆ° API å“åº”ï¼Œè¯´æ˜åç«¯éƒ¨ç½²æˆåŠŸï¼

### 5.2 æµ‹è¯•å‰ç«¯

è®¿é—®ä½ çš„ Cloudflare Pages URLï¼š
```
https://web-b2b.pages.dev
```

å¦‚æœèƒ½æ­£å¸¸æ˜¾ç¤ºç½‘ç«™ï¼Œè¯´æ˜å‰ç«¯éƒ¨ç½²æˆåŠŸï¼

### 5.3 æ£€æŸ¥æ•°æ®åº“è¿æ¥

åœ¨ Django ç®¡ç†åå°æµ‹è¯•ï¼š
1. è®¿é—® `https://django-backend-xxxx.onrender.com/admin/`
2. ä½¿ç”¨é»˜è®¤è´¦å·ç™»å½•ï¼š`admin123` / `admin123`
3. å¦‚æœèƒ½ç™»å½•ï¼Œè¯´æ˜æ•°æ®åº“è¿æ¥æ­£å¸¸ï¼

---

## ğŸ”§ å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šPlanetScale å¯¼å…¥ SQL å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
1. ä½¿ç”¨æ•°æ®åº“è¿ç§»å·¥å…·è½¬æ¢ SQL
2. æˆ–è€…æ‰‹åŠ¨åˆ›å»ºè¡¨ç»“æ„ï¼ˆè¾ƒå¤æ‚ï¼‰
3. æˆ–è€…ä½¿ç”¨ MySQL é•œåƒå·¥å…·

### é—®é¢˜ 2ï¼šRender éƒ¨ç½²å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ `requirements.txt` æ˜¯å¦æ­£ç¡®
2. æŸ¥çœ‹ Render çš„éƒ¨ç½²æ—¥å¿—
3. ç¡®ä¿ `startCommand` é…ç½®æ­£ç¡®

### é—®é¢˜ 3ï¼šCloudflare Pages éƒ¨ç½²å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
1. ç¡®ä¿ `next.config.mjs` ä¸­é…ç½®äº† `output: 'export'`
2. æ£€æŸ¥ `package.json` ä¸­çš„ `build` è„šæœ¬
3. æŸ¥çœ‹ Cloudflare çš„æ„å»ºæ—¥å¿—

### é—®é¢˜ 4ï¼šå‰ç«¯æ— æ³•è¿æ¥åç«¯

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ `NEXT_PUBLIC_API_URL` ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
2. ç¡®ä¿åç«¯çš„ CORS é…ç½®å…è®¸å‰ç«¯åŸŸå
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

---

## ğŸ’¡ é‡è¦æç¤º

1. **Render å…è´¹ç‰ˆä¼šè‡ªåŠ¨ä¼‘çœ **
   - 15 åˆ†é’Ÿæ— è®¿é—®ä¼šä¼‘çœ 
   - é¦–æ¬¡è®¿é—®éœ€è¦å†·å¯åŠ¨ï¼ˆ10-30 ç§’ï¼‰
   - å¯¹äº B2B ç½‘ç«™æ¥è¯´ï¼Œè¿™æ˜¯å¯ä»¥æ¥å—çš„

2. **æ›´æ–°ä»£ç **
   - åªéœ€è¦ `git push` åˆ° GitHub
   - Cloudflare Pages å’Œ Render éƒ½ä¼šè‡ªåŠ¨éƒ¨ç½²

3. **æ•°æ®åº“ç®¡ç†**
   - PlanetScale æä¾›åœ¨çº¿ç®¡ç†ç•Œé¢
   - å¯ä»¥åœ¨ PlanetScale æ§åˆ¶å°ç›´æ¥æ“ä½œæ•°æ®åº“

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. å„å¹³å°çš„éƒ¨ç½²æ—¥å¿—
2. æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
3. ç¯å¢ƒå˜é‡é…ç½®æ˜¯å¦æ­£ç¡®

ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸ‰
